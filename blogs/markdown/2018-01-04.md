# 文本模糊匹配

## 编辑距离

所谓编辑距离，是指两个字符串之间，由一个转换成另一个所需的最少编辑操作次数。 许可的编辑操作包括将一个字符串替换成另一个字符，插入一个字符以及删除一个字符。 更小的编辑距离意味着一个更加接近的匹配。

字符串匹配时，字符间的关系可以定义为如下几类：

- 匹配：两个字符是相同的
- 不匹配：两个字符是不相同的
- 插入或删除：一个字符对应另一个字符串中的一个空缺

编辑距离最终的结果就是计算`非匹配`结果的次数

## N元距离模型(N-gram)

N-gram是自然语言处理中一个很重要的概念，假设有一个字符串S，那么该字符串的N-gram就表示按长度N切分原词得到的词段，也就是S中所有长度为N的子字符串。

如果有两个字符串，分别求得它们各自的N-gram，那么就可以从它们共有子串的数量这个角度去定义两个字符串之间的N-gram距离。

当然，仅仅对共有子串数量进行计算也不行，考虑到两个字符串长度差异导致的问题(比如两个长度不等，但一个字符串包含另外一个：`girl`和`girlfriend`)，二者的共有子串与`girl`的相等，但我们并不据此认为`girl`和`girlfriend`是两个等同的匹配。

为了解决该问题，有人提出以非重复的N-gram分词为基础来定义`N-gram距离`这一概念，公式如下：

$$|G_{N}(S_{1})| + |G_{N}(S_{2})| - 2 \times |G_{N}(S_{1}) \cap G_{N}(S_{2})|$$

其中，$G_{N}(S)$是字符串S的N-gram集合，N值一般取2或者3，以$N = 2$为例，对字符串`Gorbachev`和`Gorbechyov`进行分段，得到如下结果(用下划线标记公共子串)：

$$\underline{Go}, \underline{or}, \underline{rb}, ba, ac, \underline{ch}, he, ev$$

$$\underline{Go}, \underline{or}, \underline{rb}, be, ec, \underline{ch}, hy, yo, ov$$

结合上面的公式，可以算出两个字符串的距离$8 + 9 - 2 \times 4 = 9$，显然，字符串距离越小，它们就越接近，当距离为0时，它们就是相等的。